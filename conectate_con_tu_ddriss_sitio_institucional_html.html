<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conéctate con tu DDRISS – Dirección Departamental de Redes Integradas de Servicios de Salud</title>
  <meta name="description" content="Portal institucional para conectar a los Distritos Municipales de Salud (DMS) con sus grupos de WhatsApp por DDRISS." />
  <style>
    :root{
      /* Paleta: morado, fucsia, rosa y lila */
      --bg-start:#3b0a72;   /* morado profundo */
      --bg-end:#7a1fa2;     /* lila/magenta oscuro */
      --accent:#ff2f87;     /* fucsia */
      --accent-2:#ff7ab6;   /* rosa */
      --text:#ffffff;       /* tipografía clara */
      --text-soft:#e9d8ff;  /* lila claro */
      --card:#ffffff10;     /* tarjeta translúcida */
      --card-border:#ffffff25;
      --shadow:0 8px 30px rgba(0,0,0,.25);
      --radius:18px;
      --focus: 0 0 0 3px rgba(255,47,135,.45), 0 4px 16px rgba(0,0,0,.25);
    }

    html, body { height: 100%; }
    * { box-sizing: border-box; }

    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: linear-gradient(135deg, var(--bg-start), var(--bg-end)) fixed;
      background-attachment: fixed;
    }

    .container{ width:min(1200px, 92vw); margin-inline:auto; }

    /* ======= Header ======= */
    header.site-header{
      position: sticky; top:0; z-index: 30;
      backdrop-filter: saturate(180%) blur(10px);
      background: linear-gradient(180deg, rgba(20,0,30,.75), rgba(20,0,30,.35));
      border-bottom: 1px solid #ffffff22;
    }
    .topbar{ display:flex; align-items:center; gap:16px; padding:16px 0; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo-badge{ width:42px; height:42px; display:grid; place-items:center; border-radius:12px; background: radial-gradient(circle at 30% 20%, var(--accent-2), var(--accent)); box-shadow: var(--shadow); }
    .title-wrap h1{ font-size: clamp(1.15rem, 2.2vw, 1.6rem); margin:0; line-height:1.25; }
    .title-wrap p{ margin:.25rem 0 0; color:var(--text-soft); font-size:.95rem }

    /* ======= Nav ======= */
    nav.tabs{ display:flex; gap:8px; padding: 8px 0 18px; overflow:auto; white-space:nowrap; scrollbar-width:thin; }
    nav.tabs::-webkit-scrollbar{ height:6px }
    nav.tabs::-webkit-scrollbar-thumb{ background:#ffffff33; border-radius:8px }
    .tab-btn{
      appearance:none; border:1px solid #ffffff33; background: #ffffff10; color:var(--text);
      padding:10px 14px; border-radius:999px; cursor:pointer; font-weight:600; letter-spacing:.2px;
      transition:.2s ease; display:flex; align-items:center; gap:8px;
    }
    .tab-btn[aria-selected="true"]{ background: var(--accent); border-color: transparent; }
    .tab-btn:hover{ transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.25); }

    /* CTA header */
    .cta-row{ display:flex; flex-wrap:wrap; gap:14px; align-items:center; justify-content:space-between; padding: 10px 0 16px; }
    .cta{ display:flex; align-items:center; gap:10px; padding:10px 14px; background:#ffffff10; border:1px solid #ffffff22; border-radius:999px; }
    .cta strong{ font-weight:700 }

    /* ======= Toolbar ======= */
    .toolbar{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; padding:20px 0; }
    .search{ flex:1 1 320px; display:flex; align-items:center; gap:10px; background:#ffffff10; border:1px solid var(--card-border); border-radius:999px; padding:10px 14px; }
    .search input{ flex:1; background:transparent; border:0; outline:none; color:var(--text); font-size:1rem; }
    .search input::placeholder{ color:#ffffff99 }
    .select-wrap{ position:relative }
    select{ appearance:none; background:#ffffff10; color:var(--text); border:1px solid var(--card-border); border-radius:999px; padding:10px 38px 10px 14px; font-weight:600; }
    .select-wrap:after{ content:"▾"; position:absolute; right:12px; top:50%; transform:translateY(-50%); pointer-events:none; }

    /* ======= Sections ======= */
    .section-header{ display:flex; align-items:end; justify-content:space-between; gap:16px; margin-top:12px; }
    .section-header h2{ margin:0; font-size: clamp(1.35rem, 2.8vw, 1.9rem); letter-spacing:.3px; }
    .section-sub{ color:var(--text-soft); margin:.25rem 0 0; }

    /* ======= Cards ======= */
    .grid{ display:grid; gap:16px; grid-template-columns: repeat( auto-fit, minmax(240px, 1fr) ); }
    .card{ background: var(--card); border:1px solid var(--card-border); border-radius: var(--radius); padding:16px; box-shadow: var(--shadow); display:flex; flex-direction:column; gap:12px; transition:.2s ease; }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .card h3{ margin:0; font-size:1.05rem }
    .badge{ display:inline-block; background:#ffffff14; border:1px solid #ffffff26; padding:4px 10px; border-radius:999px; font-size:.8rem }

    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:10px; text-decoration:none; font-weight:800; letter-spacing:.3px; padding:12px 14px; border-radius:12px; border:0; cursor:pointer; color:white; background: linear-gradient(90deg, var(--accent), #ff4fa0); box-shadow: 0 8px 20px rgba(255,47,135,.35); transition:.2s ease; }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 26px rgba(255,47,135,.5); }
    .btn:focus-visible{ outline:none; box-shadow: var(--focus); }

    .pill{ background:#ffffff12; padding:6px 10px; border-radius:999px; border:1px solid #ffffff22; font-size:.8rem }

    /* Vista General */
    .big-card{ background: linear-gradient(135deg, #ff2f87, #ff7ab6); color:white; border:0; }
    .big-card .btn{ background: #ffffff; color:#7a0c54; box-shadow: 0 8px 18px rgba(255,255,255,.25); }

    /* Footer */
    footer{ margin:40px 0 80px; color:#eedaff; opacity:.9 }

    /* Mobile menu */
    .menu-toggle{ display:none; background:#ffffff10; border:1px solid #ffffff22; color:white; padding:10px 14px; border-radius:999px; font-weight:700 }
    @media (max-width: 860px){
      nav.tabs{ display:none; }
      .menu-toggle{ display:inline-flex; }
      .drawer{ position: fixed; inset:0 0 auto auto; width:min(420px, 92vw); height:100dvh; background: linear-gradient(180deg, rgba(30,0,40,.95), rgba(30,0,40,.8)); border-left:1px solid #ffffff22; transform: translateX(110%); transition:.25s ease; z-index:99; padding:20px; }
      .drawer.open{ transform: translateX(0); }
      .drawer .tab-btn{ width:100%; justify-content:flex-start; margin-bottom:8px; }
    }

    /* Accessibility helpers */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="topbar">
        <div class="brand" aria-label="Identidad institucional">
          <div class="logo-badge" aria-hidden="true">
            <!-- ícono sencillo tipo cruz médica -->
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M11 4h2v6h6v2h-6v6h-2v-6H5v-2h6V4z" fill="white"/>
            </svg>
          </div>
          <div class="title-wrap">
            <h1>Conéctate con tu DDRISS – Dirección Departamental de Redes Integradas de Servicios de Salud</h1>
            <p>Bienvenido/a. Este portal facilita el acceso a los grupos de WhatsApp de tu Distrito Municipal de Salud (DMS) según tu DDRISS.</p>
          </div>
        </div>
        <button class="menu-toggle" aria-label="Abrir menú" id="openMenu">Menú</button>
      </div>

      <div class="cta-row">
        <div class="cta" role="note" aria-label="Invitación a WhatsApp">
          <!-- Ícono de WhatsApp inline -->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" role="img" focusable="false" style="flex:0 0 auto"><path d="M20.5 3.5A11 11 0 0 0 3.2 19.7L2 22l2.4-1.1A11 11 0 1 0 20.5 3.5z" fill="#25D366"/><path d="M9.3 7.6c-.2-.5-.4-.5-.6-.5h-.5c-.2 0-.6.1-.9.4-.3.3-1.1 1-1.1 2.5s1.1 2.9 1.3 3.1c.2.2 2.2 3.3 5.4 4.5 2.7 1.1 3.2.9 3.7.8.6-.1 1.8-.7 2-1.4.2-.7.2-1.3.1-1.4-.1-.1-.2-.2-.5-.3-.2-.1-1.3-.7-1.5-.8-.2-.1-.4-.1-.5.1-.2.2-.5.8-.6 1-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.1-.7-.5-1.3-1.6-1.5-1.8-.2-.2-.1-.4 0-.5.1-.1.2-.3.3-.4.1-.1.1-.2.1-.3 0-.1 0-.2 0-.3 0-.1-.5-1.3-.7-1.7-.2-.4-.3-.3-.5-.3-.2 0-.3 0-.4 0z" fill="#fff"/></svg>
          <strong>Únete al grupo de tu DMS según tu DDRISS</strong>
        </div>
        <div class="pill" title="Estilo institucional">Fondo degradado morado · Botones fucsia · Tipografía clara</div>
      </div>

      <nav class="tabs" aria-label="Secciones">
        <div id="tabsInline"></div>
      </nav>
    </div>
  </header>

  <!-- Drawer para móviles -->
  <aside class="drawer" aria-hidden="true" id="drawer" aria-label="Navegación">
    <h2 style="margin-top:0">Secciones</h2>
    <div id="tabsDrawer"></div>
  </aside>

  <main class="container" id="app" tabindex="-1">
    <!-- Herramientas (buscador + selector) -->
    <section class="toolbar" aria-label="Herramientas de búsqueda y filtrado">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M10 18a8 8 0 1 1 5.293-2.707L21 21l-1.5 1.5-5.707-5.707A7.962 7.962 0 0 1 10 18zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" fill="white"/></svg>
        <input id="search" type="search" placeholder="Busca tu distrito (ej. Cobán, Nebaj, Sololá)…" aria-label="Buscar distrito" />
      </div>
      <div class="select-wrap">
        <label class="sr-only" for="ddrissSelect">Elegir DDRISS</label>
        <select id="ddrissSelect" aria-label="Selecciona una DDRISS"></select>
      </div>
      <button class="btn" id="clearFilters" type="button">Limpiar filtros</button>
    </section>

    <!-- Encabezado de sección y grilla -->
    <section id="sectionHeader" class="section-header" aria-live="polite"></section>
    <div class="grid" id="cardsGrid" aria-label="Tarjetas de Distritos Municipales de Salud"></div>

    <footer>
      <p>© <span id="year"></span> Ministerio de Salud Pública y Asistencia Social · DDRISS. Diseño juvenil, claro e institucional. Accesible y responsive.</p>
    </footer>
  </main>

  <script>
    // ====== Datos (DDRISS y DMS) ======
    const DATA = [
      { key:"vista", name:"Vista General", accentHue: 320, featured:true, districts: [
        "Alta Verapaz", "Quiché Área Ixcán", "Quiché Área Ixil", "Quiché Central", "Huehuetenango", "Sololá", "Vista General"
      ]},
      { key:"alta-verapaz", name:"Alta Verapaz", accentHue: 285, districts:[
        "Campur","Chahal","Chamelco","Chisec","Cobán","Fray Bartolomé de las Casas","La Tinta","Lanquín","Panzós","Raxruhá","San Cristóbal","Carchá","Santa Cruz","Senahú","Tactic","Tamahú","Tucurú","Cahabón","Telemán","DDRISS"
      ]},
      { key:"quiche-ixcan", name:"Quiché Área Ixcán", accentHue: 300, districts:[
        "Ingenieros","Playa Grande","Tzetun","Xalbal","DDRISS"
      ]},
      { key:"quiche-ixil", name:"Quiché Área Ixil", accentHue: 305, districts:[
        "Chajul","Cotzal","Nebaj","DDRISS"
      ]},
      { key:"quiche-central", name:"Quiché Central", accentHue: 295, districts:[
        "Canillá","Chicamán","Chiche","Chichicastenango","Chinique","Chupol","Cunen","Joyabaj","La Parroquia","La Taña","Pachalum","Patzité","Sacapulas","San Andrés Sajcabajá","San Antonio Ilotenango","San Bartolomé Jocotenango","San Pedro Jocopilas","Santa Cruz del Quiché","Uspantán","Zacualpa","DDRISS"
      ]},
      { key:"huehuetenango", name:"Huehuetenango", accentHue: 290, districts:[
        "Aguacatán","Barillas","Chiantla","Colotenango","Cuilco","Huehue Norte","Huehue Sur","Jacaltenango","La Democracia","Malacatancito","Nentón","San Antonio Huista","San Juan Atitán","San Juan Ixcoy","San Mateo Ixtatán","San Miguel Acatán","San Pedro Necta","San Rafael La Independencia","San Rafael Petzal","San Sebastián Coatan","San Sebastián Huehuetenango","Santa Ana Huista","Santa Bárbara","Santa Eulalia","Santiago Chimaltenango","Soloma","Tectitán","Unión Cantinil","La Libertad","Petatán","San Gaspar Ixil","San Idelfonso Ixtahuacán","Concepción Huista","Todos Santos","Nueva Generación Maya","San Ramón","DDRISS"
      ]},
      { key:"solola", name:"Sololá", accentHue: 310, districts:[
        "Guineales","Nahualá","Panajachel","San Lucas Tolimán","San Pablo La Laguna","San Pedro La Laguna","Santa Catarina Ixtahuacán","Santa Lucía Utatlán","Santiago Atitlán","Sololá","Xejuyup","San Juan La Laguna","Santa Clara La Laguna","Santa Cruz La Laguna","Santa María Visitación","San Antonio Palopó","La Ceiba","Argueta","San Andrés Semetabaj","Los Encuentros","Concepción","Santa Catarina Palopó","San José Chacayá","San Marcos La Laguna","DDRISS"
      ]},
    ];

    // Rutas / Secciones (7 tabs)
    const ROUTES = [
      { key:"vista", label:"Vista General", icon: mapIcon },
      { key:"alta-verapaz", label:"Alta Verapaz", icon: pinIcon },
      { key:"quiche-ixcan", label:"Quiché Área Ixcán", icon: pinIcon },
      { key:"quiche-ixil", label:"Quiché Área Ixil", icon: pinIcon },
      { key:"quiche-central", label:"Quiché Central", icon: pinIcon },
      { key:"huehuetenango", label:"Huehuetenango", icon: pinIcon },
      { key:"solola", label:"Sololá", icon: pinIcon },
    ];

    // ====== Elementos ======
    const tabsInline = document.getElementById('tabsInline');
    const tabsDrawer = document.getElementById('tabsDrawer');
    const drawer = document.getElementById('drawer');
    const openMenu = document.getElementById('openMenu');
    const ddrissSelect = document.getElementById('ddrissSelect');
    const search = document.getElementById('search');
    const clearBtn = document.getElementById('clearFilters');
    const headerRegion = document.getElementById('sectionHeader');
    const grid = document.getElementById('cardsGrid');

    const state = { route: getInitialRoute(), query: '' };

    // Año actual en footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Construye tabs y drawer
    function renderTabs(container){
      container.innerHTML = '';
      ROUTES.forEach(r => {
        const b = document.createElement('button');
        b.className = 'tab-btn';
        b.setAttribute('role','tab');
        b.setAttribute('aria-selected', state.route===r.key ? 'true' : 'false');
        b.innerHTML = `${r.icon(18)} <span>${r.label}</span>`;
        b.addEventListener('click', ()=> navigate(r.key));
        container.appendChild(b);
      });
    }
    renderTabs(tabsInline);
    renderTabs(tabsDrawer);

    // Select DDRISS
    function renderSelect(){
      ddrissSelect.innerHTML = ROUTES.map(r=>`<option value="${r.key}" ${state.route===r.key?'selected':''}>${r.label}</option>`).join('');
    }
    renderSelect();

    // Drawer móvil
    openMenu.addEventListener('click', ()=>{ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); });
    drawer.addEventListener('click', (e)=>{ if(e.target === drawer){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); } });

    // Cambios de select y búsqueda
    ddrissSelect.addEventListener('change', (e)=> navigate(e.target.value));
    search.addEventListener('input', (e)=>{ state.query = e.target.value.trim().toLowerCase(); render(); });
    clearBtn.addEventListener('click', ()=>{ search.value=''; state.query=''; render(); });

    // Routing
    function getInitialRoute(){
      const hash = location.hash.replace('#','');
      const valid = ROUTES.some(r=>r.key===hash);
      return valid ? hash : 'vista';
    }
    function navigate(key){
      state.route = key; location.hash = key; renderTabs(tabsInline); renderTabs(tabsDrawer); renderSelect();
      // Limpia búsqueda al cambiar de sección
      search.value=''; state.query='';
      render();
      drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true');
    }

    // Render de sección + tarjetas
    function render(){
      const dd = DATA.find(d=> d.key===state.route) || DATA[0];
      // Ajuste sutil de acentos por sección
      document.documentElement.style.setProperty('--accent', `hsl(${dd.accentHue} 100% 55%)`);
      document.documentElement.style.setProperty('--accent-2', `hsl(${(dd.accentHue+20)%360} 100% 72%)`);

      headerRegion.innerHTML = `
        <div>
          <h2>${dd.name}</h2>
          <p class="section-sub">${dd.key==='vista' ? 'Explora las DDRISS y entra al listado de Distritos Municipales de Salud (DMS) para unirte al grupo de WhatsApp.' : 'Selecciona tu Distrito Municipal de Salud y únete al grupo de WhatsApp oficial.'}</p>
        </div>
        <div class="pill">${infoIcon(16)} Soporte: comunicación clara · cercanía · profesionalismo</div>
      `;

      grid.innerHTML = '';
      if(dd.key==='vista'){
        // Tarjetas grandes por DDRISS
        ROUTES.filter(r=>r.key!=='vista').forEach(r=>{
          const sec = DATA.find(d=> d.key===r.key);
          const card = document.createElement('article');
          card.className = 'card big-card';
          card.innerHTML = `
            <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
              <h3 style="font-size:1.2rem; margin:0">${r.label}</h3>
              <span class="badge">DDRISS</span>
            </div>
            <p style="margin:0;color:#28061f; font-weight:600">Comunicación rápida entre distritos y equipos de salud.</p>
            <div style="display:flex; gap:10px; align-items:center; margin-top:6px;">${whatsIcon(20)} <span>Grupos de WhatsApp por DMS</span></div>
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:8px;">
              ${sec.districts.slice(0,4).map(n=>`<span class=\"pill\">${n}</span>`).join('')}<span class="pill">+ más</span>
            </div>
            <div style="display:flex; justify-content:flex-end;">
              <button class="btn" type="button" aria-label="Ingresar a ${r.label}" onclick="navigate('${r.key}')">Ingresar</button>
            </div>
          `;
          grid.appendChild(card);
        });
        return;
      }

      // Filtra por búsqueda
      const list = dd.districts.filter(n => n.toLowerCase().includes(state.query));
      if(list.length===0){
        const empty = document.createElement('div');
        empty.innerHTML = `<p style="opacity:.9">No se encontraron distritos con "${state.query}". Revisa la ortografía o limpia los filtros.</p>`;
        grid.appendChild(empty);
        return;
      }

      list.forEach(name=>{
        const card = document.createElement('article');
        card.className = 'card';
        const link = '#';
        const desc = name === 'DDRISS' ? `DDRISS · ${dd.name}` : `Distrito Municipal de Salud · ${dd.name}`;
        card.innerHTML = `
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <h3>${name}</h3>
            <span class="badge">DMS</span>
          </div>
          <p style="margin:0; color:var(--text-soft)">${desc}</p>
          <div style="display:flex; justify-content:flex-end;">
            <a class="btn" href="${link}" target="_blank" rel="noopener" aria-label="Ingresar al WhatsApp de ${name}">
              ${whatsIcon(18)} <span>Ingresar</span>
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // ====== Íconos (SVG inline) ======
    function pinIcon(s=16){
      return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z" fill="currentColor"/></svg>`;
    }
    function mapIcon(s=16){
      return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M10 4l4 2 6-2v14l-6 2-4-2-6 2V6l6-2z" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M14 6v14M10 4v14M4 8l6-2M20 6l-6 2" stroke="currentColor" stroke-width="1.5"/></svg>`;
    }
    function infoIcon(s=16){
      return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.6"/><path d="M12 8.2a1.1 1.1 0 1 0 0-2.2 1.1 1.1 0 0 0 0 2.2zM11 10.5h2v7h-2z" fill="currentColor"/></svg>`;
    }
    function whatsIcon(s=18){
      return `<svg width="${s}" height="${s}" viewBox="0 0 24 24" fill="none" aria-hidden="true" role="img" focusable="false"><path d="M20.5 3.5A11 11 0 0 0 3.2 19.7L2 22l2.4-1.1A11 11 0 1 0 20.5 3.5z" fill="#25D366"/><path d="M9.3 7.6c-.2-.5-.4-.5-.6-.5h-.5c-.2 0-.6.1-.9.4-.3.3-1.1 1-1.1 2.5s1.1 2.9 1.3 3.1c.2.2 2.2 3.3 5.4 4.5 2.7 1.1 3.2.9 3.7.8.6-.1 1.8-.7 2-1.4.2-.7.2-1.3.1-1.4-.1-.1-.2-.2-.5-.3-.2-.1-1.3-.7-1.5-.8-.2-.1-.4-.1-.5.1-.2.2-.5.8-.6 1-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.1-.7-.5-1.3-1.6-1.5-1.8-.2-.2-.1-.4 0-.5.1-.1.2-.3.3-.4.1-.1.1-.2.1-.3 0-.1 0-.2 0-.3 0-.1-.5-1.3-.7-1.7-.2-.4-.3-.3-.5-.3-.2 0-.3 0-.4 0z" fill="#fff"/></svg>`;
    }

    // Primera renderización
    render();
  </script>
</body>
</html>
